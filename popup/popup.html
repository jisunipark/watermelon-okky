<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WaterMelon 🍉</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- 헤더 -->
    <header class="header">
      <h1 class="logo">🍉 WaterMelon</h1>
      <p class="tagline">YouTube → Spotify Playlist</p>
    </header>

    <!-- 상태: 비YouTube 페이지 -->
    <section id="state-not-youtube" class="state hidden">
      <div class="empty-icon">📺</div>
      <p class="message">YouTube 영상 페이지에서<br>사용해주세요!</p>
    </section>

    <!-- 상태: 스캔 중 -->
    <section id="state-scanning" class="state hidden">
      <div class="spinner"></div>
      <p class="message">곡 정보를 찾고 있어요...</p>
    </section>

    <!-- 상태: 곡 없음 -->
    <section id="state-empty" class="state hidden">
      <div class="empty-icon">🔍</div>
      <p class="message">곡 정보를 찾을 수 없습니다.</p>
      <p class="sub-message">타임스탬프가 있는 영상에서 시도해보세요.</p>
    </section>

    <!-- 상태: 곡 리스트 -->
    <section id="state-songs" class="state hidden">
      <div class="songs-header">
        <label class="select-all">
          <input type="checkbox" id="select-all" checked>
          <span>전체 선택</span>
        </label>
        <span id="song-count" class="song-count"></span>
      </div>
      <ul id="song-list" class="song-list"></ul>
      <button id="btn-sync" class="btn-primary">
        Slice & Sync 🍉
      </button>
    </section>

    <!-- 상태: 진행 중 -->
    <section id="state-progress" class="state hidden">
      <div class="progress-steps">
        <div class="step" data-step="matching">
          <div class="step-icon">🔎</div>
          <span>Matching</span>
        </div>
        <div class="step-divider"></div>
        <div class="step" data-step="creating">
          <div class="step-icon">📝</div>
          <span>Creating</span>
        </div>
        <div class="step-divider"></div>
        <div class="step" data-step="done">
          <div class="step-icon">✅</div>
          <span>Done</span>
        </div>
      </div>
      <p id="progress-message" class="message"></p>
      <div id="progress-bar-container" class="progress-bar-container">
        <div id="progress-bar" class="progress-bar"></div>
      </div>
    </section>

    <!-- 상태: 완료 -->
    <section id="state-done" class="state hidden">
      <div class="done-icon">🍉</div>
      <p class="message">플레이리스트 생성 완료!</p>
      <p id="done-stats" class="sub-message"></p>
      <a id="playlist-link" class="btn-primary" href="#" target="_blank">
        Spotify에서 열기 🎧
      </a>
      <div id="failed-songs" class="failed-songs hidden">
        <p class="failed-title">⚠️ 매칭 실패 곡</p>
        <ul id="failed-list"></ul>
      </div>
    </section>

    <!-- 상태: 에러 -->
    <section id="state-error" class="state hidden">
      <div class="empty-icon">⚠️</div>
      <p id="error-message" class="message"></p>
      <button id="btn-retry" class="btn-secondary">다시 시도</button>
    </section>
  </div>

  <script src="../secrets.js"></script>
  <script src="popup.js"></script>
</body>
</html>
